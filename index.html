<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Email Generator ‚Äî Styled</title>
<style>
  :root{
    --bg:#f6f8fb;
    --card:#ffffff;
    --mut:#6b7280;
    --primary:#1e40af;
    --accent:#2563eb;
    --pill:#eef2ff;
    --soft:#f1f5f9;
    --shadow: 0 10px 30px rgba(15,23,42,0.06);
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial;background:var(--bg);color:#081229;-webkit-font-smoothing:antialiased}
  .wrap{max-width:520px;margin:18px auto;padding:14px}
  .card{background:var(--card);border-radius:18px;padding:20px;box-shadow:var(--shadow);overflow:hidden}
  header{display:flex;align-items:center;flex-direction:column;gap:8px;padding-bottom:6px}
  .icon{width:56px;height:56px;border-radius:999px;background:linear-gradient(180deg,#eef6ff,#e6f0ff);display:flex;align-items:center;justify-content:center;color:var(--primary);font-size:22px}
  h1{margin:0;font-size:20px;color:#0f172a}
  p.lead{margin:0;color:var(--mut);font-size:13px}
  .tabs{display:flex;gap:10px;margin-top:12px}
  .tab{padding:10px 14px;border-radius:10px;background:var(--soft);cursor:pointer;color:#324151;border:1px solid transparent;font-weight:700}
  .tab.active{background:var(--primary);color:#fff;box-shadow:0 8px 24px rgba(37,99,235,0.12)}
  .section{margin-top:12px}
  label.lbl{display:block;font-size:13px;color:#0f172a;margin-bottom:8px}
  input[type="text"], textarea{width:100%;padding:12px;border-radius:10px;border:1px solid #eef3fb;background:#fbfeff;font-size:15px}
  .grid{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
  .method{padding:10px 14px;border-radius:10px;background:#f5f7fb;border:1px solid transparent;cursor:pointer;color:#0f172a;font-weight:700;font-size:14px}
  .method.active{background:var(--accent);color:#fff;box-shadow:0 8px 20px rgba(37,99,235,0.12)}
  .smalltxt{font-size:12px;color:var(--mut);margin-top:8px}
  .actions-row{display:flex;gap:12px;margin-top:14px}
  .btn{flex:1;padding:14px;border-radius:12px;border:none;cursor:pointer;font-weight:800;font-size:15px}
  .btn.primary{background:var(--accent);color:#fff;box-shadow:0 10px 28px rgba(37,99,235,0.12)}
  .btn.primary.disabled{opacity:0.45;cursor:not-allowed;box-shadow:none}
  .btn.ghost{background:#fff;border:1px solid #e6eefb;color:var(--accent)}
  .preview{margin-top:14px;padding:12px;border-radius:10px;background:#fbfdff;border:1px solid #eef6ff;font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, monospace}
  .footerbar{display:flex;justify-content:space-between;align-items:center;margin-top:18px;padding-top:12px;border-top:1px solid #f0f4fb;color:var(--mut);font-size:13px}
  .linkish{color:var(--accent);cursor:pointer;text-decoration:none}
  /* make buttons block-like on small screens */
  @media (max-width:420px){
    .actions-row{flex-direction:column}
  }
</style>
</head>
<body>
  <main class="wrap">
    <div class="card" role="application">
      <header>
        <div class="icon">‚úâÔ∏è</div>
        <h1>Email Generator</h1>
        <p class="lead">Buat varian email dengan berbagai metode</p>
      </header>

      <div class="tabs" role="tablist" aria-label="Mode">
        <button id="tabSingle" class="tab active" role="tab">Satu</button>
        <button id="tabBulk" class="tab" role="tab">Banyak</button>
      </div>

      <!-- SINGLE -->
      <div id="single" class="section" aria-hidden="false">
        <div class="field" style="margin-top:6px">
          <label class="lbl">Username Email</label>
          <input id="inpName" type="text" placeholder="namaanda" autocomplete="off" />
        </div>

        <div class="field" style="margin-top:12px">
          <label class="lbl">Domain Email</label>
          <input id="inpDomain" type="text" placeholder="gmail.com" value="gmail.com" />
        </div>

        <div style="margin-top:12px">
          <div class="lbl">Pilih Metode (bisa gabungan)</div>
          <div style="font-size:13px;color:var(--mut);margin-top:6px">Metode Username:</div>
          <div class="grid" id="methodsUser">
            <button data-method="plus" class="method">Plus (+)</button>
            <button data-method="dot" class="method">Titik (.)</button>
            <button data-method="upper" class="method">UPPERCASE</button>
            <button data-method="lower" class="method active">lowercase</button>
          </div>
        </div>

        <div style="margin-top:12px">
          <div class="lbl">Metode Domain (setelah @):</div>
          <div class="grid" id="methodsDom">
            <button data-method="domRandom" class="method">Random Case (Uppercase + Lowercase)</button>
            <button data-method="domAsIs" class="method active">As-is</button>
          </div>
        </div>

        <div class="smalltxt">Tekan untuk aktifkan/nonaktifkan. Bisa pilih lebih dari satu di setiap bagian.</div>

        <div class="actions-row">
          <button id="btnCreate" class="btn primary disabled" disabled>
            <span style="display:inline-block;margin-right:8px">üìã</span> Buat & Salin
          </button>
          <button id="btnPreview" class="btn ghost">Preview</button>
        </div>

        <div class="preview" id="previewBox" aria-live="polite">
          <div style="font-size:13px;color:var(--mut)">Email yang dibuat:</div>
          <div id="previewText" style="margin-top:8px;font-size:15px;color:#0b1220">-</div>
        </div>
      </div>

      <!-- BULK (hidden by default) -->
      <div id="bulk" class="section" style="display:none">
        <div>
          <label class="lbl">Daftar base names (satu per baris)</label>
          <textarea id="bulkList" placeholder="rizky\nandi\ngilang" style="width:100%;padding:12px;border-radius:10px;border:1px solid #eef3fb;background:#fbfeff"></textarea>
        </div>

        <div style="margin-top:12px">
          <label class="lbl">Domain</label>
          <input id="bulkDomain" type="text" value="gmail.com" />
        </div>

        <div style="margin-top:12px">
          <div class="lbl">Metode Username:</div>
          <div class="grid" id="methodsUserBulk">
            <button data-method="plus" class="method">Plus (+)</button>
            <button data-method="dot" class="method">Titik (.)</button>
            <button data-method="upper" class="method">UPPERCASE</button>
            <button data-method="lower" class="method active">lowercase</button>
          </div>
        </div>

        <div class="actions-row" style="margin-top:12px">
          <button id="btnCreateBulk" class="btn primary">Buat & Salin</button>
          <button id="btnDownloadBulk" class="btn ghost">Download .txt</button>
        </div>

        <div class="preview" style="margin-top:12px;max-height:180px;overflow:auto">
          <ol id="bulkOutput" style="padding-left:18px;margin:0"></ol>
        </div>
      </div>

      <div class="footerbar">
        <div>Nomor urut: <span id="counter">0</span></div>
        <div><a id="resetLink" class="linkish">Reset</a></div>
      </div>

    </div>

    <div style="text-align:center;margin-top:12px;color:var(--mut);font-size:13px">Dibuat oleh Iqra</div>
  </main>

<script>
(function(){
  // util
  const $ = id => document.getElementById(id);
  const toggle = el => el.classList.toggle('active');
  const setActive = (el, on) => el.classList.toggle('active', !!on);

  // tabs
  const tabSingle = $('tabSingle'), tabBulk = $('tabBulk');
  const single = $('single'), bulk = $('bulk');
  tabSingle.addEventListener('click', ()=>{
    tabSingle.classList.add('active'); tabBulk.classList.remove('active');
    single.style.display='block'; bulk.style.display='none';
  });
  tabBulk.addEventListener('click', ()=>{
    tabBulk.classList.add('active'); tabSingle.classList.remove('active');
    single.style.display='none'; bulk.style.display='block';
  });

  // method buttons (toggles)
  function wireToggle(containerId){
    const container = $(containerId);
    container.addEventListener('click', (e)=>{
      const btn = e.target.closest('button[data-method]');
      if(!btn) return;
      // for domain container, we want radio-like behaviour (domAsIs / domRandom)
      if(containerId === 'methodsDom'){
        Array.from(container.querySelectorAll('button[data-method]')).forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
        return;
      }
      btn.classList.toggle('active');
    });
  }
  wireToggle('methodsUser'); wireToggle('methodsDom'); wireToggle('methodsUserBulk');

  // inputs
  const inpName = $('inpName'), inpDomain = $('inpDomain');
  const previewText = $('previewText');
  const btnCreate = $('btnCreate'), btnPreview = $('btnPreview');
  const counterEl = $('counter'), resetLink = $('resetLink');

  // helpers for transforms
  function applyDot(name){
    if(!name) return name;
    if(name.length <= 2) return name.split('').join('.');
    return name.slice(0,2) + '.' + name.slice(2);
  }
  function applyPlus(name){
    const tags = ['shop','id','official','x','web'];
    const pick = tags[Math.floor(Math.random()*tags.length)];
    const num = Math.floor(10 + Math.random()*990);
    return name + '+' + pick + num;
  }
  function randomCase(s){
    return Array.from(s).map(c => Math.random() < 0.5 ? c.toLowerCase() : c.toUpperCase()).join('');
  }

  function readOptions(containerId){
    const container = $(containerId);
    const map = {};
    container.querySelectorAll('button[data-method]').forEach(b=>{
      map[b.dataset.method] = b.classList.contains('active');
    });
    return map;
  }

  function transform(base, opts){
    let u = base;
    if(opts.dot) u = applyDot(u);
    if(opts.plus) u = applyPlus(u);
    // casing
    if(opts.upper && !opts.lower) u = u.toUpperCase();
    else if(opts.lower && !opts.upper) u = u.toLowerCase();
    else if(opts.upper && opts.lower) u = u.toLowerCase();
    return u;
  }

  function domainTransform(domainRaw){
    const domOpts = readOptions('methodsDom');
    if(domOpts.domRandom) return randomCase(domainRaw);
    return domainRaw;
  }

  function makeEmailOnce(){
    const base = inpName.value.trim();
    if(!base) return '';
    const userOpts = readOptions('methodsUser');
    const dom = inpDomain.value.trim() || 'gmail.com';
    let user = transform(base, userOpts);
    user = user.replace(/\s+/g, '.');
    const domain = domainTransform(dom);
    return user + '@' + domain;
  }

  // preview & enable create button only when name exists
  function updatePreview(){
    const e = makeEmailOnce();
    previewText.textContent = e || '-';
    if(e){
      btnCreate.classList.remove('disabled'); btnCreate.disabled = false;
    } else {
      btnCreate.classList.add('disabled'); btnCreate.disabled = true;
    }
  }
  inpName.addEventListener('input', updatePreview);
  document.getElementById('methodsUser').addEventListener('click', updatePreview);
  document.getElementById('methodsDom').addEventListener('click', updatePreview);

  btnPreview.addEventListener('click', updatePreview);

  // create & copy: increments counter, shows toast/alert and copies
  let seq = 0;
  btnCreate.addEventListener('click', async ()=>{
    const email = makeEmailOnce();
    if(!email) return;
    seq += 1;
    counterEl.textContent = seq;
    previewText.textContent = email;
    try{
      await navigator.clipboard.writeText(email);
      // small visual feedback - brief alert-like
      const old = btnCreate.textContent;
      btnCreate.textContent = 'Tersalin ‚úì';
      setTimeout(()=> btnCreate.textContent = old, 1200);
    }catch(e){
      prompt('Salin manual:', email);
    }
  });

  resetLink.addEventListener('click', ()=>{
    seq = 0; counterEl.textContent = seq;
    // reset preview/history
    previewText.textContent = '-';
  });

  // BULK
  const bulkList = $('bulkList'), bulkDomain = $('bulkDomain'), btnCreateBulk = $('btnCreateBulk'), btnDownloadBulk = $('btnDownloadBulk'), bulkOutput = $('bulkOutput');
  btnCreateBulk.addEventListener('click', async ()=>{
    const lines = bulkList.value.split('\\n').map(s=>s.trim()).filter(Boolean);
    if(lines.length === 0){ alert('Masukkan minimal 1 nama di daftar.'); return; }
    const opts = readOptions('methodsUserBulk');
    const dom = (bulkDomain.value || 'gmail.com').trim();
    const results = lines.map(base=>{
      let u = base;
      if(opts.dot) u = applyDot(u);
      if(opts.plus) u = applyPlus(u);
      if(opts.upper && !opts.lower) u = u.toUpperCase();
      else if(opts.lower && !opts.upper) u = u.toLowerCase();
      else if(opts.upper && opts.lower) u = u.toLowerCase();
      u = u.replace(/\s+/g, '.');
      return u + '@' + dom;
    });
    bulkOutput.innerHTML = '';
    results.forEach(r => {
      const li = document.createElement('li'); li.textContent = r; bulkOutput.appendChild(li);
    });
    try{
      await navigator.clipboard.writeText(results.join('\\n'));
      alert('Tersalin ' + results.length + ' alamat ke clipboard.');
    }catch(e){
      alert('Gagal salin otomatis ‚Äî gunakan tombol Download .txt');
    }
  });

  btnDownloadBulk.addEventListener('click', ()=>{
    const items = Array.from(bulkOutput.querySelectorAll('li')).map(li=>li.textContent);
    if(items.length === 0){ alert('Tidak ada hasil untuk didownload. Buat dulu.'); return; }
    const blob = new Blob([items.join('\\n')], {type:'text/plain'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a'); a.href = url; a.download = 'emails.txt'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
  });

  // initial update
  updatePreview();
})();
</script>
</body>
</html>
