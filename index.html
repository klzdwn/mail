<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Email Generator ‚Äî Compact Stable</title>
<style>
  :root{
    --bg:#f5f7fb;
    --card:#ffffff;
    --mut:#667085;
    --accent:#2563eb;
    --primary:#1e40af;
    --soft:#f8fafc;
    --shadow: 0 10px 22px rgba(15,23,42,0.05);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial;background:var(--bg);color:#05122a}
  .wrap{max-width:560px;margin:12px auto;padding:8px}
  .card{background:var(--card);border-radius:14px;padding:10px;box-shadow:var(--shadow)}
  header{text-align:center}
  .icon{width:42px;height:42px;margin:0 auto 6px;border-radius:50%;background:#eaf2ff;display:flex;align-items:center;justify-content:center;color:#1e40af}
  h1{font-size:17px;margin:0;font-weight:800}
  p.lead{font-size:12px;margin:4px 0;color:var(--mut)}
  .tabs{display:flex;gap:6px;margin-top:8px;justify-content:center}
  .tab{padding:6px 12px;font-size:12px;border-radius:8px;border:none;font-weight:700;cursor:pointer;background:#e6efff;color:#000}
  .tab.active{background:var(--accent);color:white}
  label{font-weight:700;font-size:12px;margin-bottom:4px;display:block;color:#111}
  input,textarea{width:100%;padding:8px;border-radius:8px;border:1px solid #dce3ee;font-size:13px}
  textarea{min-height:80px}
  .grid{display:flex;flex-wrap:wrap;gap:6px;margin-top:6px}
  .method{
    flex:1 1 48%;
    padding:6px 10px;
    min-height:40px;
    background:#f3f6fc;
    border-radius:8px;
    border:1px solid #dfe6f3;
    font-size:12px;
    font-weight:700;
    cursor:pointer;
    text-align:center;
  }
  .method.active{
    background:#2563eb;
    color:white;
    border-color:#2563eb;
  }
  .btn{
    width:100%;
    padding:10px;
    margin-top:10px;
    border:none;
    border-radius:8px;
    font-size:13px;
    font-weight:800;
    cursor:pointer;
  }
  .btn.primary{background:#2563eb;color:#fff}
  .btn.ghost{background:#fff;border:1px solid #dce3ee;color:#2563eb}
  .preview{
    background:#fbfdff;
    border:1px solid #e3e9f5;
    padding:8px;
    border-radius:8px;
    margin-top:10px;
    font-size:13px;
  }
  .footerbar{text-align:center;margin-top:12px;font-size:12px;color:#667085}
  .toast{
    position:fixed;bottom:18px;left:50%;transform:translateX(-50%);
    background:#111;color:white;padding:8px 12px;border-radius:8px;
    display:none;font-size:13px;
  }
</style>
</head>
<body>

<div class="wrap">
  <div class="card">
    <header>
      <div class="icon">‚úâÔ∏è</div>
      <h1>Email Generator</h1>
      <p class="lead">Buat varian email dengan berbagai metode</p>
    </header>

    <div class="tabs">
      <button id="tabSingle" class="tab active">Satu</button>
      <button id="tabBulk" class="tab">Banyak</button>
    </div>

    <!-- MODE SATU -->
    <div id="single">
      <label>Username Email</label>
      <input id="inpName" placeholder="namaanda">

      <label style="margin-top:8px">Domain Email</label>
      <input id="inpDomain" value="gmail.com">

      <label style="margin-top:10px">Metode Username:</label>
      <div class="grid" id="methodsUser">
        <button class="method active" data-method="plus">Plus (+)</button>
        <button class="method" data-method="dot">Titik (.)</button>
        <button class="method" data-method="upper">UPPERCASE</button>
        <button class="method active" data-method="lower">lowercase</button>
      </div>

      <label style="margin-top:8px">Custom + tag</label>
      <input id="plusTag" placeholder="contoh: tokoku (tanpa +)">

      <label style="margin-top:10px">Metode Domain:</label>
      <div class="grid" id="methodsDom">
        <button class="method" data-method="domRandom">Random Case</button>
        <button class="method active" data-method="domAsIs">As-is</button>
      </div>

      <button id="btnCreate" class="btn primary">üìã Buat & Salin</button>

      <div class="preview">
        <div style="font-size:12px;color:#667085">Email yang dibuat:</div>
        <div id="previewText" style="margin-top:4px">-</div>
      </div>
    </div>

    <!-- MODE BANYAK -->
    <div id="bulk" style="display:none">
      <label>Daftar base names (satu per baris)</label>
      <textarea id="bulkList" placeholder="rizky&#10;andi&#10;gilang"></textarea>

      <label style="margin-top:8px">Domain</label>
      <input id="bulkDomain" value="gmail.com">

      <label style="margin-top:10px">Metode Username:</label>
      <div class="grid" id="methodsUserBulk">
        <button class="method" data-method="plus">Plus (+)</button>
        <button class="method" data-method="dot">Titik (.)</button>
        <button class="method" data-method="upper">UPPERCASE</button>
        <button class="method active" data-method="lower">lowercase</button>
      </div>

      <label style="margin-top:8px">Custom + tag</label>
      <input id="bulkPlusTag" placeholder="contoh: tokoku">

      <button id="btnCreateBulk" class="btn primary">Buat & Salin</button>
      <button id="btnDownloadBulk" class="btn ghost">Download .txt</button>

      <div class="preview" style="max-height:200px;overflow:auto;margin-top:10px">
        <ol id="bulkOutput" style="margin:0;padding-left:20px"></ol>
      </div>
    </div>

    <div class="footerbar">
      Nomor urut: <b id="counter">0</b>
    </div>
  </div>

  <div style="text-align:center;margin-top:10px;color:#667085;font-size:12px">
    Dibuat oleh Iqra ‚Äî versi compact
  </div>
</div>

<div id="toast" class="toast">Tersalin</div>

<script>
(function(){
  const $ = id => document.getElementById(id);

  /* ========== MODE TAB ========== */
  const tabSingle = $('tabSingle');
  const tabBulk = $('tabBulk');
  const single = $('single');
  const bulk = $('bulk');

  tabSingle.onclick = () => {
    tabSingle.classList.add("active");
    tabBulk.classList.remove("active");
    single.style.display="block";
    bulk.style.display="none";
  };
  tabBulk.onclick = () => {
    tabBulk.classList.add("active");
    tabSingle.classList.remove("active");
    single.style.display="block";
    single.style.display="none";
    single.style.display="none";
    single.style.display="none";
    single.style.display="none";
  };

  tabBulk.onclick = () => {
    tabBulk.classList.add("active");
    tabSingle.classList.remove("active");
    single.style.display="none";
    bulk.style.display="block";
  };

  /* ========== TOGGLE BUTTONS ========== */
  function wireToggle(containerId, radio=false){
    const box = $(containerId);
    box.addEventListener("click", e=>{
      const btn = e.target.closest("button[data-method]");
      if(!btn) return;

      if(radio){
        box.querySelectorAll("button").forEach(b=>{
          b.classList.remove("active");
        });
        btn.classList.add("active");
      } else {
        btn.classList.toggle("active");
      }
      updatePreview();
    });
  }

  wireToggle("methodsUser", false);
  wireToggle("methodsDom", true);
  wireToggle("methodsUserBulk", false);

  /* ========== HELPERS ========== */
  function readOpts(id){
    const out = {};
    $(id).querySelectorAll("button[data-method]").forEach(b=>{
      out[b.dataset.method] = b.classList.contains("active");
    });
    return out;
  }

  function applyDot(n){
    if(n.length<=2) return n.split("").join(".");
    return n.slice(0,2)+"."+n.slice(2);
  }

  function applyPlus(n, tag){
    if(tag.trim()!==""){
      return n + "+" + tag.trim().replace(/^\+/, "");
    }
    return n + "+id";
  }

  function randomCase(s){
    return [...s].map(c => Math.random()<0.5 ? c.toLowerCase() : c.toUpperCase()).join("");
  }

  function transformUsername(base, opt, tag){
    let u = base;
    if(opt.dot) u = applyDot(u);
    if(opt.plus) u = applyPlus(u, tag);
    if(opt.upper && !opt.lower) u = u.toUpperCase();
    else u = u.toLowerCase();
    return u.replace(/\s+/g,".");
  }

  function domainTransform(raw){
    const opt = readOpts("methodsDom");
    if(opt.domRandom) return randomCase(raw);
    return raw;
  }

  /* ========== COPY FUNCTION ========== */
  async function copy(text){
    try{
      await navigator.clipboard.writeText(text);
      return true;
    }catch(e){
      try{
        const ta = document.createElement("textarea");
        ta.value = text;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand("copy");
        ta.remove();
        return true;
      }catch(err){
        return false;
      }
    }
  }

  function toast(msg){
    const t = $("toast");
    t.textContent = msg;
    t.style.display="block";
    clearTimeout(t._t);
    t._t = setTimeout(()=> t.style.display="none", 1200);
  }

  /* ========== PREVIEW UPDATE ========== */
  function makeEmail(){
    const name = $("inpName").value.trim();
    if(!name) return "";
    const opt = readOpts("methodsUser");
    const domain = $("inpDomain").value.trim() || "gmail.com";
    const tag = $("plusTag").value.trim();
    const u = transformUsername(name, opt, tag);
    const d = domainTransform(domain);
    return u + "@" + d;
  }

  function updatePreview(){
    const s = makeEmail();
    $("previewText").textContent = s || "-";
  }

  $("inpName").oninput = updatePreview;
  $("inpDomain").oninput = updatePreview;
  $("plusTag").oninput = updatePreview;

  /* ========== SINGLE GENERATE ========== */
  let count = 0;
  $("btnCreate").onclick = async ()=>{
    const email = makeEmail();
    if(!email){ toast("Isi username dulu"); return; }
    count++;
    $("counter").textContent = count;
    $("previewText").textContent = email;
    const ok = await copy(email);
    toast(ok ? "Tersalin: " + email : "Gagal salin ‚Äî salin manual");
  };

  /* ========== BULK ========== */
  $("btnCreateBulk").onclick = async ()=>{
    const list = $("bulkList").value.split("\n").map(s=>s.trim()).filter(s=>s);
    if(!list.length){ alert("Isi daftar dulu"); return; }

    const opt = readOpts("methodsUserBulk");
    const dom = $("bulkDomain").value.trim() || "gmail.com";
    const tag = $("bulkPlusTag").value.trim();

    $("bulkOutput").innerHTML = "";

    const result = list.map(n=>{
      const email = transformUsername(n, opt, tag) + "@" + dom;
      const li=document.createElement("li");
      li.textContent=email;
      $("bulkOutput").appendChild(li);
      return email;
    });

    await copy(result.join("\n"));
    toast("Tersalin " + result.length + " email");
  };

  $("btnDownloadBulk").onclick = ()=>{
    const all = [...$("bulkOutput").querySelectorAll("li")].map(li=>li.textContent);
    if(!all.length){ alert("Tidak ada data"); return; }
    const blob = new Blob([all.join("\n")], {type:"text/plain"});
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href=url;a.download="emails.txt";a.click();
    URL.revokeObjectURL(url);
  };

  updatePreview();
})();
</script>

</body>
</html>
